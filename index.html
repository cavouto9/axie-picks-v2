<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=0.3, user-scalable=yes">
<title>Axie Teams Manager</title>
<link rel="icon" type="image/png" href="https://i.ibb.co/LDM0FH3M/favicon.png">
<link rel="apple-touch-icon" href="https://i.ibb.co/LDM0FH3M/favicon.png">
<style>
* {
    box-sizing: border-box;
}

html {
    position: relative;
    overflow-x: hidden;
}

body {
    width: 100%;
}

:root {
    --bg-primary: #0f0f1e;
    --bg-secondary: #1a1a2e;
    --bg-tertiary: #16213e;
    --bg-card: #1e1a3a;
    --bg-card-hover: #252145;
    --bg-input: rgba(255, 255, 255, 0.08);
    --bg-input-focus: rgba(255, 255, 255, 0.15);
    --bg-axie-container: rgba(30, 30, 50, 0.6);
    --bg-button: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --bg-button-hover: linear-gradient(135deg, #7c8ef0 0%, #8a5fb8 100%);
    --text-primary: #ffffff;
    --text-secondary: rgba(255, 255, 255, 0.8);
    --text-muted: rgba(255, 255, 255, 0.6);
    --border-color: rgba(255, 255, 255, 0.25);
    --border-hover: rgba(255, 255, 255, 0.4);
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
    --accent-primary: #667eea;
    --accent-secondary: #764ba2;
    --gradient-bg: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 50%, #16213e 100%);
}

[data-theme="light"] {
    --bg-primary: #f5f7fa;
    --bg-secondary: #ffffff;
    --bg-tertiary: #e8ecf1;
    --bg-card: #f8f7ff;
    --bg-card-hover: #f0efff;
    --bg-input: rgba(0, 0, 0, 0.05);
    --bg-input-focus: rgba(0, 0, 0, 0.1);
    --bg-axie-container: rgba(240, 240, 245, 0.4);
    --bg-button: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --bg-button-hover: linear-gradient(135deg, #7c8ef0 0%, #8a5fb8 100%);
    --text-primary: #1a1a2e;
    --text-secondary: rgba(26, 26, 46, 0.8);
    --text-muted: rgba(26, 26, 46, 0.6);
    --border-color: rgba(0, 0, 0, 0.15);
    --border-hover: rgba(0, 0, 0, 0.25);
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.2);
    --accent-primary: #667eea;
    --accent-secondary: #764ba2;
    --gradient-bg: linear-gradient(135deg, #f5f7fa 0%, #ffffff 50%, #e8ecf1 100%);
}

body {
    font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
    background: var(--gradient-bg);
    background-attachment: fixed;
    color: var(--text-primary);
    margin: 0;
    padding: 20px;
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
    transition: background 0.3s ease, color 0.3s ease;
}

body.login-required .main-content {
    display: none;
}

.login-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--gradient-bg);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    backdrop-filter: blur(10px);
}

.login-overlay.hidden {
    display: none;
}

.login-container {
    background: var(--bg-card);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 40px;
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--border-color);
    width: 100%;
    max-width: 400px;
    animation: fadeIn 0.5s ease-out;
}

.login-container h2 {
    text-align: center;
    margin-bottom: 30px;
    font-size: 2rem;
    font-weight: 800;
    color: var(--text-primary);
    text-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

.login-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.login-form input[type="text"],
.login-form input[type="password"] {
    padding: 14px 18px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    background: var(--bg-input);
    backdrop-filter: blur(10px);
    color: var(--text-primary);
    font-size: 15px;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
    width: 100%;
}

.login-form input[type="text"]::placeholder,
.login-form input[type="password"]::placeholder {
    color: var(--text-muted);
}

.login-form input[type="text"]:focus,
.login-form input[type="password"]:focus {
    outline: none;
    border-color: var(--border-hover);
    background: var(--bg-input-focus);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.login-form .remember-me {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--text-secondary);
    font-size: 14px;
    cursor: pointer;
}

.login-form .remember-me input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--accent-primary);
}

.login-form button {
    background: var(--bg-button);
    color: #fff;
    font-weight: 700;
    border: none;
    padding: 14px 28px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-md);
    font-size: 15px;
    letter-spacing: 0.3px;
    margin-top: 10px;
}

.login-form button:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    background: var(--bg-button-hover);
}

.login-error {
    background: rgba(255, 71, 87, 0.2);
    border: 2px solid rgba(255, 71, 87, 0.5);
    color: #ff4757;
    padding: 12px;
    border-radius: 8px;
    font-size: 14px;
    text-align: center;
    display: none;
    animation: shake 0.5s ease;
}

.login-error.show {
    display: block;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.15) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
    transition: opacity 0.3s ease;
}

[data-theme="light"] body::before {
    opacity: 0.5;
}

.theme-toggle {
    background: var(--bg-button);
    color: #fff;
    font-weight: 700;
    border: none;
    padding: 14px 28px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-md);
    font-size: 15px;
    letter-spacing: 0.3px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.theme-toggle:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    background: var(--bg-button-hover);
}

.theme-toggle-icon {
    font-size: 20px;
    transition: transform 0.3s ease;
}

.theme-toggle:hover .theme-toggle-icon {
    transform: rotate(20deg);
}

h1 {
    text-align: center;
    margin-bottom: 30px;
    font-size: 2.5rem;
    font-weight: 800;
    text-shadow: 0 4px 20px rgba(0,0,0,0.3);
    letter-spacing: -0.5px;
    position: relative;
    z-index: 1;
    color: var(--text-primary);
    transition: color 0.3s ease;
}

.add-team {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 40px;
    position: relative;
    z-index: 1;
}

.add-team input[type="text"] {
    padding: 14px 18px;
    border-radius: 12px;
    border: 2px solid var(--border-color);
    width: 220px;
    background: var(--bg-input);
    backdrop-filter: blur(10px);
    color: var(--text-primary);
    font-size: 15px;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
}

.add-team input[type="text"]::placeholder {
    color: var(--text-muted);
}

.add-team input[type="text"]:focus {
    outline: none;
    border-color: var(--border-hover);
    background: var(--bg-input-focus);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.add-team button {
    background: var(--bg-button);
    color: #fff;
    font-weight: 700;
    border: none;
    padding: 14px 28px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-md);
    font-size: 15px;
    letter-spacing: 0.3px;
}

.add-team button:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    background: var(--bg-button-hover);
}

.add-team button:active {
    transform: translateY(0);
}

#teamsContainer {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    align-items: stretch;
    position: relative;
    z-index: 1;
    padding: 0 20px;
    max-width: 1800px;
    margin: 0 auto;
    grid-auto-rows: auto;
}

@media (max-width: 700px) {
    #teamsContainer {
        padding: 0 10px;
        gap: 16px;
    }
}

@media (max-width: 500px) {
    #teamsContainer {
        padding: 0 8px;
        gap: 12px;
    }
}

.team-card {
    background: var(--bg-card);
    backdrop-filter: blur(20px);
    border-radius: 16px;
    padding: 20px;
    width: 100%;
    box-shadow: var(--shadow-lg), 0 0 0 1px rgba(255, 255, 255, 0.05);
    transition: box-shadow 0.3s ease, background 0.3s ease, border-color 0.3s ease;
    border: 2px solid var(--border-color);
    cursor: grab;
    position: relative;
    display: flex;
    flex-direction: column;
    height: 100%;
}

.team-card:active {
    cursor: grabbing;
}

.team-card:hover {
    box-shadow: var(--shadow-lg);
    background: var(--bg-card-hover);
    border-color: var(--border-hover);
}

.team-card.dragging {
    opacity: 0.6;
    z-index: 1000;
}

.team-card.drag-over {
    border: 2px solid rgba(46, 213, 115, 0.8);
    background: rgba(46, 213, 115, 0.1);
}

.team-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 10px;
    border-bottom: none;
    gap: 6px;
    flex-wrap: nowrap;
}

.team-header .team-buttons {
    display: flex;
    gap: 6px;
    flex-shrink: 0;
    flex-wrap: nowrap;
    align-items: center;
}

.team-name {
    font-size: 18px;
    font-weight: 700;
    text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    letter-spacing: -0.5px;
    color: var(--text-primary);
    transition: color 0.3s ease;
    cursor: pointer;
    padding: 4px 8px;
    border-radius: 6px;
    flex: 1;
}

.team-name:hover {
    background: var(--bg-input);
}

.team-name-input {
    font-size: 18px;
    font-weight: 700;
    background: var(--bg-input);
    border: 2px solid var(--border-hover);
    color: var(--text-primary);
    padding: 4px 8px;
    border-radius: 6px;
    width: 100%;
    max-width: 300px;
    outline: none;
}

.team-header button {
    background: var(--bg-input);
    color: var(--text-primary);
    font-weight: 600;
    border: 2px solid var(--border-color);
    padding: 6px 10px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 11px;
    backdrop-filter: blur(10px);
    white-space: nowrap;
}

.team-header button:hover {
    background: rgba(255, 71, 87, 0.2);
    border-color: rgba(255, 71, 87, 0.5);
    color: #ff4757;
    transform: scale(1.05);
}

.team-header button.clear-axies-btn {
    background: rgba(255, 193, 7, 0.2);
    border-color: rgba(255, 193, 7, 0.5);
    color: #ffc107;
}

.team-header button.clear-axies-btn:hover {
    background: rgba(255, 193, 7, 0.3);
    border-color: rgba(255, 193, 7, 0.7);
    color: #ffc107;
}

.axie-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    justify-content: center;
    padding: 5px;
    width: 100%;
    min-height: 0;
    flex-grow: 1;
    align-content: start;
}

.axie-container {
    position: relative;
    cursor: pointer;
    border-radius: 16px;
    overflow: visible;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 2px solid var(--border-color);
    width: 100%;
    background: var(--bg-axie-container);
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow-md), inset 0 0 0 1px rgba(255, 255, 255, 0.1);
    outline: none !important;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;
    display: flex;
    flex-direction: column;
}

.axie-container .axie-image-wrapper {
    position: relative;
    width: 100%;
    aspect-ratio: 1;
    overflow: hidden;
    border-radius: 13px 13px 0 0;
}

.axie-container .axie-id-label {
    padding: 4px 6px;
    text-align: center;
    font-size: 10px;
    font-weight: 600;
    color: var(--text-secondary);
    background: var(--bg-secondary);
    border-radius: 0 0 13px 13px;
    border-top: 1px solid var(--border-color);
    min-height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    letter-spacing: 0.5px;
}

.axie-container:hover {
    transform: scale(1.1) rotate(2deg);
    box-shadow: var(--shadow-lg), inset 0 0 0 1px rgba(255, 255, 255, 0.15);
    z-index: 10;
    border-color: var(--border-hover);
    background: var(--bg-card);
}

.axie-container.banned:hover,
.axie-container.picked:hover {
    transform: scale(1.05) !important;
}

.axie-container:active,
.axie-container:focus {
    outline: none !important;
    transform: none !important;
    -webkit-transform: none !important;
}

.axie-container:active:focus {
    outline: none !important;
    transform: none !important;
    -webkit-transform: none !important;
}

.axie-container:active *,
.axie-container:focus * {
    transform: none !important;
    -webkit-transform: none !important;
}

.axie-container:active .axie-image-wrapper img,
.axie-container:focus .axie-image-wrapper img {
    transform: scale(1.1) !important;
    -webkit-transform: scale(1.1) !important;
}

.axie-container .axie-image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center center;
    transform: scale(1.1);
    transition: all 0.3s ease;
    background: transparent;
    -webkit-user-drag: none;
    user-select: none;
    -webkit-user-select: none;
    pointer-events: none;
}

.axie-container .axie-image-wrapper img.loading {
    opacity: 0.5;
    filter: blur(5px);
}

.axie-container .axie-image-wrapper img.error {
    opacity: 0.3;
}

.axie-container.banned {
    border-color: #ff4757;
    background: rgba(255, 71, 87, 0.1);
    box-shadow: 0 0 20px rgba(255, 71, 87, 0.4);
    transform: scale(1.05);
    transition: none !important;
}

.axie-container.banned::after {
    content: 'üö´';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2rem;
    z-index: 5;
    pointer-events: none;
}

.axie-container.picked {
    border-color: #2ed573;
    background: rgba(46, 213, 115, 0.1);
    box-shadow: 0 0 20px rgba(46, 213, 115, 0.4);
    transform: scale(1.05);
    transition: none !important;
}

.axie-container.picked::after {
    content: '‚úì';
    position: absolute;
    top: 8px;
    left: 8px;
    background: #2ed573;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 18px;
    z-index: 5;
    box-shadow: 0 2px 10px rgba(46, 213, 115, 0.5);
}

.axie-delete {
    position: absolute;
    top: 6px;
    right: 6px;
    background: var(--bg-secondary);
    color: #ff4757;
    border: 2px solid var(--border-color);
    border-radius: 50%;
    width: 28px;
    height: 28px;
    font-weight: bold;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
    z-index: 10;
    line-height: 1;
}

.axie-delete:hover {
    background: #ff4757;
    color: white;
    transform: scale(1.2) rotate(90deg);
    box-shadow: 0 4px 15px rgba(255, 71, 87, 0.5);
}

.add-axie {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-top: auto;
    padding-top: 12px;
    border-top: none;
    flex-wrap: wrap;
    flex-shrink: 0;
}

.add-axie input {
    padding: 8px 12px;
    border-radius: 8px;
    border: 2px solid var(--border-color);
    width: 140px;
    background: var(--bg-input);
    backdrop-filter: blur(10px);
    color: var(--text-primary);
    font-size: 12px;
    transition: all 0.3s ease;
}

.add-axie input::placeholder {
    color: var(--text-muted);
}

.add-axie input:focus {
    outline: none;
    border-color: var(--border-hover);
    background: var(--bg-input-focus);
    transform: translateY(-2px);
}

.add-axie button {
    background: var(--bg-button);
    color: #fff;
    font-weight: 700;
    border: none;
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 12px;
    box-shadow: var(--shadow-sm);
}

.add-axie button:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    background: var(--bg-button-hover);
}

.add-axie button.copy-ids-btn {
    background: rgba(102, 126, 234, 0.2);
    border: 2px solid rgba(102, 126, 234, 0.5);
    color: #667eea;
    font-size: 11px;
    padding: 6px 12px;
}

.add-axie button.copy-ids-btn:hover {
    background: rgba(102, 126, 234, 0.3);
    border-color: rgba(102, 126, 234, 0.7);
    color: #667eea;
}

.empty-state {
    text-align: center;
    padding: 40px;
    color: var(--text-secondary);
    font-size: 18px;
}

.status-indicator {
    display: none !important;
    position: fixed !important;
    top: 80px !important;
    right: 20px !important;
    padding: 10px 20px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    z-index: 1000;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
}

.status-indicator.connected {
    background: rgba(46, 213, 115, 0.3);
    border: 2px solid rgba(46, 213, 115, 0.5);
    color: #2ed573;
}

.status-indicator.disconnected {
    background: rgba(255, 71, 87, 0.3);
    border: 2px solid rgba(255, 71, 87, 0.5);
    color: #ff4757;
    cursor: pointer;
}

.status-indicator.disconnected:hover {
    background: rgba(255, 71, 87, 0.4);
    transform: scale(1.05);
}

.firebase-warning {
    position: fixed;
    top: 80px;
    right: 20px;
    max-width: 350px;
    padding: 15px 20px;
    border-radius: 12px;
    background: rgba(255, 193, 7, 0.2);
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 193, 7, 0.4);
    color: #ffc107;
    font-size: 13px;
    z-index: 999;
    box-shadow: var(--shadow-md);
    animation: slideIn 0.3s ease-out;
}

.firebase-warning strong {
    display: block;
    margin-bottom: 8px;
    font-size: 14px;
}

.firebase-warning a {
    color: #ffc107;
    text-decoration: underline;
}

.status-indicator.syncing {
    background: rgba(255, 193, 7, 0.3);
    border: 2px solid rgba(255, 193, 7, 0.5);
    color: #ffc107;
}

.status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

.status-indicator.connected .status-dot {
    background: #2ed573;
}

.status-indicator.disconnected .status-dot {
    background: #ff4757;
}

.status-indicator.syncing .status-dot {
    background: #ffc107;
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.5;
        transform: scale(0.8);
    }
}

.realtime-notification {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 15px 20px;
    border-radius: 12px;
    background: rgba(46, 213, 115, 0.2);
    backdrop-filter: blur(10px);
    border: 2px solid rgba(46, 213, 115, 0.4);
    color: #2ed573;
    font-weight: 600;
    font-size: 14px;
    z-index: 1000;
    animation: slideIn 0.3s ease-out;
    box-shadow: var(--shadow-md);
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@media (max-width: 1200px) {
    #teamsContainer {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 900px) {
    #teamsContainer {
        grid-template-columns: 1fr;
        gap: 16px;
    }
    
    .axie-grid {
        grid-template-columns: repeat(5, 1fr);
        gap: 6px;
    }
    
    .team-card {
        padding: 12px;
    }
}

@media (max-width: 700px) {
    h1 {
        font-size: 1.8rem;
        margin-bottom: 20px;
    }
    
    .axie-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
    }
    
    .axie-container {
        padding: 4px;
    }
    
    .axie-container .axie-image-wrapper {
        padding: 2px;
        border-radius: 10px 10px 0 0;
    }
    
    .axie-container .axie-image-wrapper img {
        object-fit: cover;
        object-position: center center;
        transform: scale(1.4);
        padding: 0;
    }
    
    .axie-container .axie-id-label {
        font-size: 10px;
        padding: 3px 4px;
        min-height: 18px;
    }
    
    .axie-container.picked::after {
        top: 4px;
        left: 4px;
        right: auto;
        width: 18px;
        height: 18px;
        font-size: 12px;
        box-shadow: 0 1px 5px rgba(46, 213, 115, 0.5);
    }
    
    .axie-delete {
        width: 20px;
        height: 20px;
        font-size: 14px;
        top: 2px;
        right: 2px;
        border-width: 1.5px;
    }
    
    .team-name {
        font-size: 15px;
    }
    
    .team-card {
        padding: 10px;
    }
    
    .add-team {
        margin-bottom: 20px;
        gap: 8px;
    }
    
    .add-team input[type="text"] {
        width: 100%;
        max-width: 200px;
        padding: 8px 12px;
        font-size: 12px;
        border-radius: 8px;
    }
    
    .add-team button {
        padding: 8px 16px;
        font-size: 12px;
        border-radius: 8px;
        letter-spacing: 0.2px;
    }
    
    .theme-toggle {
        display: none !important;
    }
}

@media (max-width: 500px) {
    .axie-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 6px;
    }
    
    .axie-container {
        padding: 3px;
    }
    
    .axie-container .axie-image-wrapper {
        border-radius: 8px 8px 0 0;
    }
    
    .axie-container .axie-image-wrapper img {
        border-radius: 6px;
        padding: 0;
        object-fit: cover;
        object-position: center center;
        transform: scale(1.4);
    }
    
    .axie-container .axie-id-label {
        font-size: 9px;
        padding: 2px 3px;
        min-height: 16px;
    }
    
    .axie-container.picked::after {
        top: 3px;
        left: 3px;
        right: auto;
        width: 16px;
        height: 16px;
        font-size: 11px;
        box-shadow: 0 1px 4px rgba(46, 213, 115, 0.5);
    }
    
    .axie-delete {
        width: 18px;
        height: 18px;
        font-size: 12px;
        top: 1px;
        right: 1px;
        border-width: 1px;
        padding: 0;
    }
    
    .axie-delete:hover {
        transform: scale(1.1) rotate(90deg);
    }
    
    .team-card {
        padding: 8px;
        margin-bottom: 12px;
        margin-left: 0;
        margin-right: 0;
    }
    
    .team-name {
        font-size: 14px;
        width: 100%;
        margin-bottom: 4px;
        min-width: 0;
    }
    
    .team-header {
        flex-wrap: wrap;
        gap: 6px;
    }
    
    .team-header .team-buttons {
        display: flex;
        flex-wrap: nowrap;
        width: auto;
        min-width: 0;
        justify-content: flex-start;
        gap: 4px;
    }
    
    .team-header .team-buttons button {
        flex-shrink: 0;
        white-space: nowrap;
        padding: 6px 10px;
        font-size: 12px;
    }
    
    .add-axie input {
        width: 100%;
        max-width: 140px;
        padding: 8px 10px;
        font-size: 12px;
    }
    
    .add-axie button {
        padding: 8px 12px;
        font-size: 12px;
    }
    
    .add-axie .copy-ids-btn {
        padding: 8px 10px;
        font-size: 11px;
    }
    
    .status-indicator {
        display: none !important;
    }
    
    h1 {
        font-size: 1.5rem;
        margin-bottom: 15px;
    }
    
    .add-team {
        margin-bottom: 15px;
        gap: 6px;
    }
    
    .add-team input[type="text"] {
        max-width: 160px;
        padding: 7px 10px;
        font-size: 11px;
    }
    
    .add-team button {
        padding: 7px 14px;
        font-size: 11px;
    }
    
    .theme-toggle {
        display: none !important;
    }
    
    .axie-container {
        transform: none !important;
        -webkit-transform: none !important;
    }
    
    .axie-container:active,
    .axie-container:focus,
    .axie-container:active:focus {
        transform: none !important;
        -webkit-transform: none !important;
    }
    
    .axie-container .axie-image-wrapper img {
        transform: scale(1.4) !important;
        -webkit-transform: scale(1.4) !important;
        will-change: auto;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>
</head>
<body>

<div class="login-overlay" id="loginOverlay">
    <div class="login-container">
        <h2>üîê Iniciar Sesi√≥n</h2>
        <form class="login-form" id="loginForm" onsubmit="handleLogin(event)">
            <div class="login-error" id="loginError">
                ‚ö†Ô∏è Usuario o contrase√±a incorrectos
            </div>
            <input 
                type="text" 
                id="usernameInput" 
                placeholder="Usuario" 
                required
                autocomplete="username"
            >
            <input 
                type="password" 
                id="passwordInput" 
                placeholder="Contrase√±a" 
                required
                autocomplete="current-password"
            >
            <label class="remember-me">
                <input type="checkbox" id="rememberMe">
                <span>Recordar contrase√±a</span>
            </label>
            <button type="submit">Ingresar</button>
        </form>
    </div>
</div>

<div class="main-content">
<h1>‚öîÔ∏è Axie Teams Manager</h1>

<div id="statusIndicator" class="status-indicator disconnected">
    <span class="status-dot"></span>
    <span id="statusText">Desconectado</span>
</div>

<div class="add-team">
    <input type="text" id="teamNameInput" placeholder="Nombre del equipo">
    <input type="text" id="axieIdsInput" placeholder="IDs separados por coma">
    <button onclick="addTeam()">‚ûï Agregar equipo</button>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Cambiar tema">
        <span class="theme-toggle-icon" id="themeIcon">üåô</span>
        <span id="themeText">Modo Oscuro</span>
    </button>
</div>

<div id="teamsContainer"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<script>
// Bloquear clic derecho y herramientas de desarrollador
document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
});

document.addEventListener('keydown', function(e) {
    // Bloquear F12
    if (e.key === 'F12') {
        e.preventDefault();
        return false;
    }
    // Bloquear Ctrl+Shift+I (Inspeccionar)
    if (e.ctrlKey && e.shiftKey && e.key === 'I') {
        e.preventDefault();
        return false;
    }
    // Bloquear Ctrl+Shift+J (Consola)
    if (e.ctrlKey && e.shiftKey && e.key === 'J') {
        e.preventDefault();
        return false;
    }
    // Bloquear Ctrl+Shift+C (Selector de elementos)
    if (e.ctrlKey && e.shiftKey && e.key === 'C') {
        e.preventDefault();
        return false;
    }
    // Bloquear Ctrl+U (Ver c√≥digo fuente)
    if (e.ctrlKey && e.key === 'U') {
        e.preventDefault();
        return false;
    }
    // Bloquear Ctrl+S (Guardar p√°gina)
    if (e.ctrlKey && e.key === 'S') {
        e.preventDefault();
        return false;
    }
    // Bloquear Ctrl+P (Imprimir)
    if (e.ctrlKey && e.key === 'P') {
        e.preventDefault();
        return false;
    }
    // Bloquear Ctrl+Shift+K (Consola en Firefox)
    if (e.ctrlKey && e.shiftKey && e.key === 'K') {
        e.preventDefault();
        return false;
    }
});

// Bloquear selecci√≥n de texto (opcional, pero puede ayudar)
document.addEventListener('selectstart', function(e) {
    e.preventDefault();
    return false;
});

// Bloquear arrastrar y soltar
document.addEventListener('dragstart', function(e) {
    e.preventDefault();
    return false;
});

function hashPassword(str) {
    let hash = 0;
    if (str.length === 0) return hash.toString();
    for (let i = 0; i < str.length; i++) {
        const char = str.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash;
    }
    return Math.abs(hash).toString(36) + str.length.toString(36);
}

const _0x1a2b = ['enfermo', 'mental'];
const _0x3c4d = btoa('admin').split('').reverse().join('');
const AUTH_DATA = {
    u: _0x3c4d,
    p: hashPassword(_0x1a2b[0] + _0x1a2b[1])
};

function decodeUsername(encoded) {
    try {
        return atob(encoded.split('').reverse().join(''));
    } catch {
        return '';
    }
}

const LOGIN_CREDENTIALS = {
    username: decodeUsername(AUTH_DATA.u),
    passwordHash: AUTH_DATA.p
};

function checkLogin() {
    const remembered = localStorage.getItem('rememberLogin');
    const savedUsername = localStorage.getItem('savedUsername');
    const savedPassword = localStorage.getItem('savedPassword');
    
    if (remembered === 'true' && savedUsername && savedPassword) {
        const usernameMatch = savedUsername === LOGIN_CREDENTIALS.username;
        const passwordMatch = hashPassword(savedPassword) === LOGIN_CREDENTIALS.passwordHash;
        
        if (usernameMatch && passwordMatch) {
            showMainContent();
            return true;
        } else {
            localStorage.removeItem('rememberLogin');
            localStorage.removeItem('savedUsername');
            localStorage.removeItem('savedPassword');
        }
    }
    
    showLogin();
    return false;
}

function showLogin() {
    document.body.classList.add('login-required');
    const overlay = document.getElementById('loginOverlay');
    if (overlay) {
        overlay.classList.remove('hidden');
    }
    
    const remembered = localStorage.getItem('rememberLogin');
    if (remembered === 'true') {
        const savedUsername = localStorage.getItem('savedUsername');
        const savedPassword = localStorage.getItem('savedPassword');
        if (savedUsername) {
            document.getElementById('usernameInput').value = savedUsername;
        }
        if (savedPassword) {
            document.getElementById('passwordInput').value = savedPassword;
        }
        document.getElementById('rememberMe').checked = true;
    }
    
    document.getElementById('usernameInput').focus();
}

function showMainContent() {
    document.body.classList.remove('login-required');
    const overlay = document.getElementById('loginOverlay');
    if (overlay) {
        overlay.classList.add('hidden');
    }
    
    function initializeContent() {
        const teamsContainer = document.getElementById('teamsContainer');
        if (!teamsContainer) {
            console.warn('‚ö†Ô∏è teamsContainer no encontrado, reintentando...');
            setTimeout(initializeContent, 100);
            return;
        }
        
        if (typeof loadTeams === 'function') {
            console.log('üîÑ Cargando equipos...');
            loadTeams();
        } else {
            console.warn('‚ö†Ô∏è loadTeams no est√° definida, reintentando...');
            setTimeout(initializeContent, 100);
            return;
        }
        
        if (typeof setupContainerDragAndDrop === 'function') {
            setupContainerDragAndDrop();
        }
    }
    
    setTimeout(initializeContent, 150);
}

function handleLogin(event) {
    event.preventDefault();
    
    const username = document.getElementById('usernameInput').value.trim();
    const password = document.getElementById('passwordInput').value;
    const rememberMe = document.getElementById('rememberMe').checked;
    const errorDiv = document.getElementById('loginError');
    
    const usernameMatch = username === LOGIN_CREDENTIALS.username;
    const passwordMatch = hashPassword(password) === LOGIN_CREDENTIALS.passwordHash;
    
    if (usernameMatch && passwordMatch) {
        if (rememberMe) {
            localStorage.setItem('rememberLogin', 'true');
            localStorage.setItem('savedUsername', username);
            localStorage.setItem('savedPassword', password);
        } else {
            localStorage.removeItem('rememberLogin');
            localStorage.removeItem('savedUsername');
            localStorage.removeItem('savedPassword');
        }
        
        errorDiv.classList.remove('show');
        showMainContent();
    } else {
        errorDiv.classList.add('show');
        document.getElementById('passwordInput').value = '';
        document.getElementById('passwordInput').focus();
        
        setTimeout(() => {
            errorDiv.classList.remove('show');
        }, 3000);
    }
}

function initTheme() {
    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
    updateThemeUI(savedTheme);
}

function toggleTheme() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    updateThemeUI(newTheme);
}

function updateThemeUI(theme) {
    const themeIcon = document.getElementById('themeIcon');
    const themeText = document.getElementById('themeText');
    
    if (themeIcon && themeText) {
        if (theme === 'light') {
            themeIcon.textContent = '‚òÄÔ∏è';
            themeText.textContent = 'Modo Claro';
        } else {
            themeIcon.textContent = 'üåô';
            themeText.textContent = 'Modo Oscuro';
        }
    }
}

initTheme();

const firebaseConfig = {
    apiKey: "AIzaSyCLU9XKBuiZ6QyWRoy1hgN-AG_lYkKDNaA",
    authDomain: "axie-teams-manager.firebaseapp.com",
    databaseURL: "https://axie-teams-manager-default-rtdb.firebaseio.com",
    projectId: "axie-teams-manager",
    storageBucket: "axie-teams-manager.firebasestorage.app",
    messagingSenderId: "90838655104",
    appId: "1:90838655104:web:ba7444a58661f8330b8665"
};

let db = null;
let isFirebaseConfigured = false;
let isSyncing = false;
let realtimeListener = null;
let lastSaveTime = 0;
let pendingSave = false;

function isFirebaseConfigValid() {
    return firebaseConfig.apiKey && 
           firebaseConfig.apiKey !== "TU_API_KEY" &&
           firebaseConfig.apiKey.length > 10 &&
           firebaseConfig.projectId && 
           firebaseConfig.projectId !== "TU_PROJECT_ID" &&
           firebaseConfig.databaseURL && 
           firebaseConfig.databaseURL.includes('firebaseio.com');
}

try {
    if (isFirebaseConfigValid()) {
        firebase.initializeApp(firebaseConfig);
        db = firebase.database();
        isFirebaseConfigured = true;
        updateConnectionStatus('connected');
        console.log('‚úÖ Firebase conectado correctamente');
        console.log('üîÑ Sincronizaci√≥n en tiempo real activada');
    } else {
        console.warn('‚ö†Ô∏è Firebase no configurado correctamente.');
        console.warn('üìñ Lee GUIA_FIREBASE.md para instrucciones completas');
        console.warn('üíæ Usando modo local (localStorage)');
        updateConnectionStatus('disconnected');
        showFirebaseWarning();
    }
} catch (error) {
    console.error('‚ùå Error al inicializar Firebase:', error);
    console.error('üí° Verifica que:');
    console.error('   1. Todas las credenciales est√©n correctamente copiadas');
    console.error('   2. Las comillas " est√©n alrededor de cada valor');
    console.error('   3. La Realtime Database est√© creada en Firebase');
    console.error('   4. Las reglas de seguridad permitan lectura/escritura');
    updateConnectionStatus('disconnected');
    showFirebaseWarning();
}

let teamCount = 0;
const DB_PATH = 'axieTeams';

function testFirebaseConnection() {
    if (!isFirebaseConfigured || !db) {
        console.error('‚ùå Firebase no est√° configurado');
        return;
    }
    
    console.log('üß™ Probando conexi√≥n con Firebase...');
    db.ref(DB_PATH).once('value')
        .then((snapshot) => {
            console.log('‚úÖ Conexi√≥n exitosa!');
            console.log('üìä Datos actuales:', snapshot.val());
        })
        .catch((error) => {
            console.error('‚ùå Error de conexi√≥n:', error);
            console.error('üí° Verifica las reglas de seguridad en Firebase Console');
        });
}

window.testFirebase = testFirebaseConnection;

function updateConnectionStatus(status) {
    const indicator = document.getElementById('statusIndicator');
    const statusText = document.getElementById('statusText');
    
    indicator.className = `status-indicator ${status}`;
    
    switch(status) {
        case 'connected':
            statusText.textContent = 'üü¢ Conectado';
            break;
        case 'disconnected':
            statusText.textContent = 'üî¥ Modo Local';
            break;
        case 'syncing':
            statusText.textContent = 'üü° Sincronizando...';
            break;
    }
}

function showFirebaseWarning() {
    if (document.getElementById('firebaseWarning')) return;
    
    const warning = document.createElement('div');
    warning.id = 'firebaseWarning';
    warning.className = 'firebase-warning';
    warning.innerHTML = `
        <strong>‚ö†Ô∏è Firebase no configurado</strong>
        Est√°s en modo local. Para habilitar sincronizaci√≥n en tiempo real:
        <br><br>
        üìñ Lee <strong>GUIA_FIREBASE.md</strong> para instrucciones paso a paso
        <br><br>
        <a href="https://console.firebase.google.com/" target="_blank">üîó Ir a Firebase Console</a>
    `;
    document.body.appendChild(warning);
    
    setTimeout(() => {
        warning.style.cursor = 'pointer';
        warning.onclick = () => warning.remove();
    }, 2000);
}

function showRealtimeNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'realtime-notification';
    notification.textContent = `üîÑ ${message}`;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideIn 0.3s ease-out reverse';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

function getTeamsData() {
    const teams = [];
    const container = document.getElementById('teamsContainer');
    if (!container) return teams;
    
    const teamCards = Array.from(container.children).filter(child => child.classList.contains('team-card'));
    
    teamCards.forEach(teamDiv => {
        const teamId = teamDiv.dataset.teamId;
        const nameElement = teamDiv.querySelector('.team-name');
        if (!nameElement) return;
        
        const name = nameElement.innerText || nameElement.textContent || '';
        const axies = [];
        const axieContainers = teamDiv.querySelectorAll('.axie-container');
        axieContainers.forEach(axieDiv => {
            const id = axieDiv.dataset.axieId;
            if (!id) return;
            let status = '';
            if(axieDiv.classList.contains('banned')) status = 'banned';
            else if(axieDiv.classList.contains('picked')) status = 'picked';
            axies.push({id: String(id), status: status});
        });
        teams.push({id: String(teamId), name: name, axies: axies});
    });
    return teams;
}

function saveTeams(immediate = false) {
    const teams = getTeamsData();
    const now = Date.now();
    
    localStorage.setItem('axieTeams', JSON.stringify(teams));
    
    if (isFirebaseConfigured && db) {
        lastSaveTime = now;
        pendingSave = true;
        
        clearTimeout(window.saveTimeout);
        
        const saveToFirebase = () => {
            if (pendingSave) {
                pendingSave = false;
                const wasSyncing = isSyncing;
                isSyncing = true;
                updateConnectionStatus('syncing');
                
                db.ref(DB_PATH).set(teams)
                    .then(() => {
                        setTimeout(() => {
                            isSyncing = false;
                            updateConnectionStatus('connected');
                        }, 300);
                    })
                    .catch((error) => {
                        console.error('‚ùå Error al guardar en Firebase:', error);
                        isSyncing = false;
                        updateConnectionStatus('connected');
                    });
            }
        };
        
        if (immediate) {
            saveToFirebase();
        } else {
            window.saveTimeout = setTimeout(saveToFirebase, 300);
        }
    }
}

function updateTeamsIncremental(newTeams, isRealtimeUpdate = false) {
    const container = document.getElementById('teamsContainer');
    const currentTeams = Array.from(container.querySelectorAll('.team-card'));
    
    if (currentTeams.length === 0) {
        renderTeams(newTeams, isRealtimeUpdate);
        return;
    }
    
    const currentOrder = currentTeams.map(card => card.dataset.teamId);
    const newOrder = newTeams.map(t => String(t.id !== undefined ? t.id : t.name));
    
    const orderChanged = JSON.stringify(currentOrder) !== JSON.stringify(newOrder);
    
    if (orderChanged && isRealtimeUpdate) {
        const teamMap = new Map();
        currentTeams.forEach(teamDiv => {
            teamMap.set(teamDiv.dataset.teamId, teamDiv);
        });
        
        newOrder.forEach((teamId, index) => {
            const teamDiv = teamMap.get(teamId);
            if (teamDiv) {
                const currentIndex = Array.from(container.children).indexOf(teamDiv);
                if (currentIndex !== index) {
                    const targetElement = container.children[index];
                    if (targetElement) {
                        container.insertBefore(teamDiv, targetElement);
                    } else {
                        container.appendChild(teamDiv);
                    }
                }
            }
        });
    }
    
    newTeams.forEach((newTeam, teamIndex) => {
        const teamId = String(newTeam.id !== undefined ? newTeam.id : newTeam.name);
        const existingTeamDiv = container.querySelector(`.team-card[data-team-id="${teamId}"]`);
        
        if (!existingTeamDiv) {
            const teamDiv = createTeamElement(newTeam, teamId);
            const insertIndex = newOrder.indexOf(teamId);
            const currentChildren = Array.from(container.children).filter(c => c.classList.contains('team-card'));
            if (insertIndex >= 0 && insertIndex < currentChildren.length) {
                container.insertBefore(teamDiv, currentChildren[insertIndex]);
            } else {
                container.appendChild(teamDiv);
            }
            return;
        }
        
        const nameElement = existingTeamDiv.querySelector('.team-name');
        if (nameElement) {
            const currentName = nameElement.innerText || nameElement.textContent || '';
            const newName = String(newTeam.name || '');
            if (currentName !== newName) {
                nameElement.innerText = newName;
            }
        }
        
        const grid = existingTeamDiv.querySelector('.axie-grid');
        if (grid) {
            const currentAxies = Array.from(grid.querySelectorAll('.axie-container'));
            const currentAxieIds = currentAxies.map(axie => String(axie.dataset.axieId || ''));
            const newAxieIds = (newTeam.axies || []).map(axie => String(axie.id || '')).filter(id => id);
            
            currentAxies.forEach(axieDiv => {
                const axieId = String(axieDiv.dataset.axieId || '');
                if (!newAxieIds.includes(axieId)) {
                    axieDiv.remove();
                }
            });
            
            newTeam.axies.forEach(axie => {
                const axieId = String(axie.id || '');
                if (!axieId) return;
                
                const existingAxie = grid.querySelector(`.axie-container[data-axie-id="${axieId}"]`);
                
                if (!existingAxie) {
                    addAxieToGrid(axieId, grid, String(axie.status || ''), false);
                } else {
                    const currentLocalStatus = existingAxie.classList.contains('banned') ? 'banned' : 
                                              existingAxie.classList.contains('picked') ? 'picked' : '';
                    const newRemoteStatus = String(axie.status || '');
                    
                    if (currentLocalStatus !== newRemoteStatus) {
                        const lastStatusChange = existingAxie.dataset.lastStatusChange ? parseInt(existingAxie.dataset.lastStatusChange) : 0;
                        const timeSinceLastChange = Date.now() - lastStatusChange;
                        const timeSinceLastSave = Date.now() - lastSaveTime;
                        
                        if (timeSinceLastChange > 1500 || (timeSinceLastSave > 1000 && !isSyncing)) {
                            existingAxie.classList.remove('banned', 'picked');
                            if (newRemoteStatus === 'banned') {
                                existingAxie.classList.add('banned');
                            } else if (newRemoteStatus === 'picked') {
                                existingAxie.classList.add('picked');
                            }
                        }
                    }
                }
            });
        }
    });
    
    const newTeamIds = newTeams.map(t => String(t.id !== undefined ? t.id : t.name));
    currentTeams.forEach(teamDiv => {
        const teamId = teamDiv.dataset.teamId;
        if (!newTeamIds.includes(teamId)) {
            teamDiv.remove();
        }
    });
    
    if (container.children.length === 0) {
        container.innerHTML = '<div class="empty-state">No hay equipos guardados. ¬°Crea tu primer equipo arriba!</div>';
    }
}

function createTeamElement(team, teamId) {
    const teamDiv = document.createElement('div');
    teamDiv.className = 'team-card';
    teamDiv.dataset.teamId = teamId;

    const header = document.createElement('div');
    header.className = 'team-header';
    
    const nameSpan = document.createElement('span');
    nameSpan.className = 'team-name';
    nameSpan.textContent = team.name;
    nameSpan.title = 'Haz doble clic para editar';
    nameSpan.addEventListener('dblclick', () => editTeamName(teamId));
    
    let lastTap = 0;
    nameSpan.addEventListener('touchend', (e) => {
        const currentTime = new Date().getTime();
        const tapLength = currentTime - lastTap;
        if (tapLength < 300 && tapLength > 0) {
            e.preventDefault();
            editTeamName(teamId);
        }
        lastTap = currentTime;
    });
    
    const buttonsContainer = document.createElement('div');
    buttonsContainer.className = 'team-buttons';
    
    const clearBtn = document.createElement('button');
    clearBtn.className = 'clear-axies-btn';
    clearBtn.innerHTML = 'üóëÔ∏è Limpiar';
    clearBtn.onclick = () => clearAllAxies(teamId);
    
    const deleteBtn = document.createElement('button');
    deleteBtn.innerHTML = 'üóëÔ∏è Eliminar';
    deleteBtn.onclick = () => deleteTeam(teamId);
    
    buttonsContainer.appendChild(clearBtn);
    buttonsContainer.appendChild(deleteBtn);
    
    header.appendChild(nameSpan);
    header.appendChild(buttonsContainer);
    header.style.pointerEvents = 'auto';
    teamDiv.appendChild(header);

    const grid = document.createElement('div');
    grid.className = 'axie-grid';

    team.axies.forEach(axie => {
        if (axie.id) {
            addAxieToGrid(axie.id, grid, axie.status || '', false);
        }
    });

    teamDiv.appendChild(grid);

    const addAxieDiv = document.createElement('div');
    addAxieDiv.className = 'add-axie';
    addAxieDiv.innerHTML = `
        <input type="text" placeholder="ID Axie o IDs separados por coma" id="axieInput-${teamId}" onkeypress="if(event.key==='Enter') addAxie(${teamId})">
        <button onclick="addAxie(${teamId})">‚ûï Agregar Axie(s)</button>
        <button class="copy-ids-btn" onclick="copyAllAxieIds(${teamId})">üìã Copiar todas las IDs</button>
    `;
    teamDiv.appendChild(addAxieDiv);
    
    setupDragAndDrop(teamDiv);
    
    return teamDiv;
}

function setupDragAndDrop(teamCard) {
    teamCard.draggable = true;
    
    const header = teamCard.querySelector('.team-header');
    const buttons = teamCard.querySelectorAll('button');
    const inputs = teamCard.querySelectorAll('input');
    
    [header, ...buttons, ...inputs].forEach(element => {
        if (element) {
            element.addEventListener('mousedown', (e) => {
                e.stopPropagation();
            });
            element.addEventListener('touchstart', (e) => {
                e.stopPropagation();
            });
            element.addEventListener('dragstart', (e) => {
                e.stopPropagation();
                e.preventDefault();
            });
        }
    });
    
    let touchStartY = 0;
    let touchStartX = 0;
    let isDragging = false;
    let touchTarget = null;
    
    const canDrag = (target) => {
        if (!target) return false;
        if (target.tagName === 'BUTTON' || 
            target.tagName === 'INPUT' ||
            target.closest('button.axie-delete') ||
            target.closest('.axie-container') ||
            target.closest('.team-header button') ||
            target.closest('.add-axie')) {
            return false;
        }
        return true;
    };
    
    const startDrag = (e, touchEvent = null) => {
        const target = touchEvent ? touchEvent.target : (e ? e.target : null);
        if (!target || !canDrag(target)) {
            return false;
        }
        
        const container = document.getElementById('teamsContainer');
        const currentOrder = Array.from(container.querySelectorAll('.team-card')).map(card => card.dataset.teamId);
        teamCard.dataset.previousOrder = JSON.stringify(currentOrder);
        
        teamCard.classList.add('dragging');
        isDragging = true;
        
        if (e && e.dataTransfer) {
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', teamCard.dataset.teamId);
        }
        
        return true;
    };
    
    const endDrag = () => {
        if (!isDragging) return;
        
        teamCard.classList.remove('dragging');
        document.querySelectorAll('.team-card').forEach(card => {
            card.classList.remove('drag-over');
        });
        
        const container = document.getElementById('teamsContainer');
        const currentOrder = Array.from(container.querySelectorAll('.team-card')).map(card => card.dataset.teamId);
        const previousOrder = teamCard.dataset.previousOrder ? JSON.parse(teamCard.dataset.previousOrder) : null;
        
        if (previousOrder && JSON.stringify(currentOrder) !== JSON.stringify(previousOrder)) {
            setTimeout(() => {
                saveTeams();
            }, 100);
        }
        
        isDragging = false;
        touchTarget = null;
    };
    
    const handleDragOver = (clientY, clientX = null) => {
        if (!isDragging) return;
        
        const dragging = document.querySelector('.dragging');
        if (!dragging || dragging === teamCard) return;
        
        const box = teamCard.getBoundingClientRect();
        const centerY = box.top + box.height / 2;
        const container = teamCard.parentElement;
        
        if (clientY < centerY) {
            container.insertBefore(dragging, teamCard);
        } else {
            const nextSibling = teamCard.nextElementSibling;
            if (nextSibling && nextSibling.classList.contains('team-card') && nextSibling !== dragging) {
                container.insertBefore(dragging, nextSibling);
            } else {
                container.appendChild(dragging);
            }
        }
        
        teamCard.classList.add('drag-over');
    };
    
    teamCard.addEventListener('dragstart', (e) => {
        if (!startDrag(e)) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }
    });
    
    teamCard.addEventListener('dragend', () => {
        endDrag();
    });
    
    teamCard.addEventListener('dragover', (e) => {
        e.preventDefault();
        if (e.dataTransfer) {
            e.dataTransfer.dropEffect = 'move';
        }
        handleDragOver(e.clientY);
    });
    
    teamCard.addEventListener('dragleave', () => {
        teamCard.classList.remove('drag-over');
    });
    
    teamCard.addEventListener('drop', (e) => {
        e.preventDefault();
        teamCard.classList.remove('drag-over');
        
        setTimeout(() => {
            saveTeams();
        }, 50);
    });
    
    teamCard.addEventListener('touchstart', (e) => {
        if (!canDrag(e.target)) return;
        
        touchStartY = e.touches[0].clientY;
        touchStartX = e.touches[0].clientX;
        touchTarget = e.target;
        isDragging = false;
        
        const touchDelay = setTimeout(() => {
            if (startDrag(null, e)) {
                teamCard.style.transition = 'none';
            }
        }, 400);
        
        teamCard.dataset.touchDelay = touchDelay;
    }, { passive: true });
    
    teamCard.addEventListener('touchmove', (e) => {
        const touch = e.touches[0];
        const deltaY = Math.abs(touch.clientY - touchStartY);
        const deltaX = Math.abs(touch.clientX - touchStartX);
        
        if (!isDragging && teamCard.dataset.touchDelay) {
            if (deltaY > 30 || deltaX > 30) {
                clearTimeout(teamCard.dataset.touchDelay);
                delete teamCard.dataset.touchDelay;
                
                if (startDrag(null, e)) {
                    teamCard.style.transition = 'none';
                    e.preventDefault();
                }
            } else {
                clearTimeout(teamCard.dataset.touchDelay);
                delete teamCard.dataset.touchDelay;
            }
        }
        
        if (isDragging) {
            e.preventDefault();
            
            const offsetY = touch.clientY - touchStartY;
            teamCard.style.transform = `translateY(${offsetY}px)`;
            teamCard.style.opacity = '0.8';
            teamCard.style.zIndex = '1000';
            
            const container = document.getElementById('teamsContainer');
            const cards = Array.from(container.querySelectorAll('.team-card:not(.dragging)'));
            let afterElement = null;
            
            const currentY = touch.clientY;
            
            for (const card of cards) {
                const box = card.getBoundingClientRect();
                const centerY = box.top + box.height / 2;
                
                if (currentY < centerY) {
                    afterElement = card;
                    break;
                }
            }
            
            if (afterElement && afterElement !== teamCard.nextSibling) {
                container.insertBefore(teamCard, afterElement);
                touchStartY = touch.clientY - offsetY;
            } else if (!afterElement && cards.length > 0) {
                const lastCard = cards[cards.length - 1];
                if (teamCard !== lastCard.nextSibling) {
                    container.insertBefore(teamCard, lastCard.nextSibling);
                    touchStartY = touch.clientY - offsetY;
                }
            } else if (cards.length === 0) {
                container.appendChild(teamCard);
                touchStartY = touch.clientY - offsetY;
            }
        }
    }, { passive: false });
    
    teamCard.addEventListener('touchend', (e) => {
        if (teamCard.dataset.touchDelay) {
            clearTimeout(teamCard.dataset.touchDelay);
            delete teamCard.dataset.touchDelay;
        }
        
        if (isDragging) {
            e.preventDefault();
            teamCard.style.transform = '';
            teamCard.style.opacity = '';
            teamCard.style.zIndex = '';
            teamCard.style.transition = '';
            endDrag();
        }
    });
    
    teamCard.addEventListener('touchcancel', () => {
        if (teamCard.dataset.touchDelay) {
            clearTimeout(teamCard.dataset.touchDelay);
            delete teamCard.dataset.touchDelay;
        }
        
        if (isDragging) {
            teamCard.style.transform = '';
            teamCard.style.opacity = '';
            teamCard.style.zIndex = '';
            teamCard.style.transition = '';
            endDrag();
        }
    });
}

function setupContainerDragAndDrop() {
    const container = document.getElementById('teamsContainer');
    if (!container) return;
    
    const handleContainerDragOver = (clientY) => {
        const dragging = document.querySelector('.dragging');
        if (!dragging) return;
        
        const cards = Array.from(container.querySelectorAll('.team-card:not(.dragging)'));
        let afterElement = null;
        
        for (const card of cards) {
            const box = card.getBoundingClientRect();
            const centerY = box.top + box.height / 2;
            
            if (clientY < centerY) {
                afterElement = card;
                break;
            }
        }
        
        if (afterElement) {
            container.insertBefore(dragging, afterElement);
        } else if (cards.length > 0) {
            container.insertBefore(dragging, cards[cards.length - 1].nextSibling);
        } else {
            container.appendChild(dragging);
        }
    };
    
    container.addEventListener('dragover', (e) => {
        e.preventDefault();
        if (e.dataTransfer) {
            e.dataTransfer.dropEffect = 'move';
        }
        handleContainerDragOver(e.clientY);
    });
    
    container.addEventListener('drop', (e) => {
        e.preventDefault();
        
        setTimeout(() => {
            saveTeams();
        }, 50);
    });
    
    container.addEventListener('touchmove', (e) => {
        const dragging = document.querySelector('.dragging');
        if (dragging) {
            e.preventDefault();
            const touch = e.touches[0];
            handleContainerDragOver(touch.clientY);
        }
    }, { passive: false });
}

function renderTeams(teams, isRealtimeUpdate = false) {
    const container = document.getElementById('teamsContainer');
    
    if (!teams || teams.length === 0) {
        container.innerHTML = '<div class="empty-state">No hay equipos guardados. ¬°Crea tu primer equipo arriba!</div>';
        return;
    }
    
    container.innerHTML = '';
    teamCount = 0;
    
    teams.forEach(team => {
        const currentTeamId = team.id !== undefined ? team.id : teamCount;
        const teamDiv = createTeamElement(team, currentTeamId);
        container.appendChild(teamDiv);
        teamCount = Math.max(teamCount, parseInt(currentTeamId) + 1);
    });
}

function loadTeams() {
    if (isFirebaseConfigured && db) {
        updateConnectionStatus('syncing');
        
        db.ref(DB_PATH).once('value')
            .then((snapshot) => {
                const teams = snapshot.val();
                if (teams) {
                    renderTeams(teams);
                    localStorage.setItem('axieTeams', JSON.stringify(teams));
                } else {
                    const saved = localStorage.getItem('axieTeams');
                    if (saved) {
                        renderTeams(JSON.parse(saved));
                    } else {
                        renderTeams([]);
                    }
                }
                updateConnectionStatus('connected');
                
                setupRealtimeListener();
            })
            .catch((error) => {
                console.error('Error al cargar desde Firebase:', error);
                const saved = localStorage.getItem('axieTeams');
                if (saved) {
                    renderTeams(JSON.parse(saved));
                } else {
                    renderTeams([]);
                }
                updateConnectionStatus('disconnected');
            });
    } else {
        const saved = localStorage.getItem('axieTeams');
        if (saved) {
            renderTeams(JSON.parse(saved));
        } else {
            renderTeams([]);
        }
    }
}

function setupRealtimeListener() {
    if (!isFirebaseConfigured || !db) {
        console.warn('‚ö†Ô∏è No se puede configurar el listener: Firebase no est√° configurado');
        return;
    }
    
    if (realtimeListener) {
        db.ref(DB_PATH).off('value', realtimeListener);
    }
    
    console.log('üîÑ Configurando listener en tiempo real...');
    
    let lastUpdateTime = Date.now();
    let updateTimeout = null;
    
    realtimeListener = db.ref(DB_PATH).on('value', (snapshot) => {
        const teams = snapshot.val();
        const now = Date.now();
        
        if (now - lastUpdateTime < 300) {
            return;
        }
        
        const timeSinceLastSave = now - lastSaveTime;
        
        if (timeSinceLastSave < 1000 && isSyncing) {
            return;
        }
        
        const normalizeData = (data) => {
            if (!data) return '';
            const normalized = (data || []).map((team, index) => ({
                index: index,
                id: String(team.id || ''),
                name: String(team.name || ''),
                axies: (team.axies || []).map(axie => ({
                    id: String(axie.id || ''),
                    status: String(axie.status || '')
                })).sort((a, b) => a.id.localeCompare(b.id))
            }));
            return JSON.stringify(normalized);
        };
        
        clearTimeout(updateTimeout);
        updateTimeout = setTimeout(() => {
            if (timeSinceLastSave < 800 && isSyncing) {
                return;
            }
            
            const currentData = normalizeData(getTeamsData());
            const newData = normalizeData(teams);
            
            if (currentData !== newData && newData !== '') {
                const wasSyncing = isSyncing;
                isSyncing = true;
                lastUpdateTime = now;
                pendingSave = false;
                
                updateTeamsIncremental(teams || [], true);
                localStorage.setItem('axieTeams', JSON.stringify(teams || []));
                
                setTimeout(() => {
                    isSyncing = false;
                }, 400);
            }
        }, 200);
    }, (error) => {
        console.error('‚ùå Error en el listener de Firebase:', error);
        updateConnectionStatus('disconnected');
    });
    
    console.log('‚úÖ Listener en tiempo real configurado correctamente');
}

function addTeam() {
    const teamName = document.getElementById('teamNameInput').value.trim();
    const axieIdsRaw = document.getElementById('axieIdsInput').value.trim();
    if(!teamName) { 
        alert("‚ö†Ô∏è Agrega un nombre de equipo"); 
        return; 
    }

    const axieIds = axieIdsRaw ? axieIdsRaw.split(/[\s,]+/).filter(id => id.trim()) : [];
    const container = document.getElementById('teamsContainer');
    
    if (container.querySelector('.empty-state')) {
        container.innerHTML = '';
    }

    const teamDiv = document.createElement('div');
    teamDiv.className = 'team-card';
    teamDiv.dataset.teamId = teamCount;

    const header = document.createElement('div');
    header.className = 'team-header';
    
    const nameSpan = document.createElement('span');
    nameSpan.className = 'team-name';
    nameSpan.textContent = teamName;
    nameSpan.title = 'Haz doble clic para editar';
    nameSpan.addEventListener('dblclick', () => editTeamName(teamCount));
    
    let lastTap = 0;
    nameSpan.addEventListener('touchend', (e) => {
        const currentTime = new Date().getTime();
        const tapLength = currentTime - lastTap;
        if (tapLength < 300 && tapLength > 0) {
            e.preventDefault();
            editTeamName(teamCount);
        }
        lastTap = currentTime;
    });
    
    const buttonsContainer = document.createElement('div');
    buttonsContainer.className = 'team-buttons';
    
    const clearBtn = document.createElement('button');
    clearBtn.className = 'clear-axies-btn';
    clearBtn.innerHTML = 'üóëÔ∏è Limpiar';
    clearBtn.onclick = () => clearAllAxies(teamCount);
    
    const deleteBtn = document.createElement('button');
    deleteBtn.innerHTML = 'üóëÔ∏è Eliminar';
    deleteBtn.onclick = () => deleteTeam(teamCount);
    
    buttonsContainer.appendChild(clearBtn);
    buttonsContainer.appendChild(deleteBtn);
    
    header.appendChild(nameSpan);
    header.appendChild(buttonsContainer);
    teamDiv.appendChild(header);

    const grid = document.createElement('div');
    grid.className = 'axie-grid';

    axieIds.forEach(id => {
        const trimmedId = id.trim();
        if (trimmedId) {
            addAxieToGrid(trimmedId, grid);
        }
    });

    teamDiv.appendChild(grid);

    const addAxieDiv = document.createElement('div');
    addAxieDiv.className = 'add-axie';
    addAxieDiv.innerHTML = `
        <input type="text" placeholder="ID Axie o IDs separados por coma" id="axieInput-${teamCount}" onkeypress="if(event.key==='Enter') addAxie(${teamCount})">
        <button onclick="addAxie(${teamCount})">‚ûï Agregar Axie(s)</button>
        <button class="copy-ids-btn" onclick="copyAllAxieIds(${teamCount})">üìã Copiar todas las IDs</button>
    `;
    teamDiv.appendChild(addAxieDiv);

    container.appendChild(teamDiv);

    teamCount++;
    document.getElementById('teamNameInput').value = '';
    document.getElementById('axieIdsInput').value = '';

    saveTeams();
}

function addAxieToGrid(id, grid, status='', shouldSave = true) {
    
    const existingAxies = Array.from(grid.querySelectorAll('.axie-container'));
    if (existingAxies.some(axie => axie.dataset.axieId === id)) {
        if (shouldSave) alert("‚ö†Ô∏è Este Axie ya est√° en el equipo");
        return false;
    }
    
    const axieDiv = document.createElement('div');
    axieDiv.className = 'axie-container';
    axieDiv.dataset.axieId = id;
    if(status) axieDiv.classList.add(status);

    const imageWrapper = document.createElement('div');
    imageWrapper.className = 'axie-image-wrapper';

    const img = document.createElement('img');
    img.src = `https://axiecdn.axieinfinity.com/axies/${id}/axie/axie-full-transparent.png`;
    img.alt = `Axie ${id}`;
    img.className = 'loading';
    
    let imageValid = false;
    let validationTimeout = null;
    
    img.onload = () => {
        img.classList.remove('loading');
        img.classList.remove('error');
        imageValid = true;
        if (validationTimeout) clearTimeout(validationTimeout);
    };
    
    img.onerror = () => {
        const altImg = new Image();
        altImg.src = `https://assets.axieinfinity.com/axies/${id}/axie/axie-full-transparent.png`;
        altImg.onload = () => {
            img.src = altImg.src;
            img.classList.remove('loading');
            img.classList.remove('error');
            imageValid = true;
            if (validationTimeout) clearTimeout(validationTimeout);
        };
        altImg.onerror = () => {
            img.classList.remove('loading');
            img.classList.add('error');
            if (shouldSave) {
                alert(`‚ö†Ô∏è ID inv√°lida: ${id}\nEl Axie con este ID no existe.`);
            }
            axieDiv.remove();
            imageValid = false;
            if (validationTimeout) clearTimeout(validationTimeout);
        };
    };
    
    validationTimeout = setTimeout(() => {
        if (!imageValid) {
            if (shouldSave) {
                alert(`‚ö†Ô∏è ID inv√°lida: ${id}\nNo se pudo cargar la imagen del Axie.`);
            }
            axieDiv.remove();
        }
    }, 5000);

    imageWrapper.appendChild(img);

    const idLabel = document.createElement('div');
    idLabel.className = 'axie-id-label';
    idLabel.textContent = `#${id}`;

    axieDiv.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        
        axieDiv.blur();
        if (document.activeElement) {
            document.activeElement.blur();
        }
        
        if (document.activeElement && document.activeElement !== document.body) {
            document.activeElement.blur();
        }
        
        const wasBanned = axieDiv.classList.contains('banned');
        const wasPicked = axieDiv.classList.contains('picked');
        
        if(wasBanned) {
            axieDiv.classList.remove('banned');
            axieDiv.classList.add('picked');
        } else if(wasPicked) {
            axieDiv.classList.remove('picked');
        } else {
            axieDiv.classList.add('banned');
        }
        
        axieDiv.style.transform = '';
        axieDiv.style.webkitTransform = '';
        
        setTimeout(() => {
            axieDiv.blur();
            if (document.activeElement) {
                document.activeElement.blur();
            }
            if (document.body) {
                document.body.focus();
            }
        }, 50);
        
        const currentStatus = axieDiv.classList.contains('banned') ? 'banned' : 
                              axieDiv.classList.contains('picked') ? 'picked' : '';
        
        axieDiv.dataset.lastStatusChange = Date.now().toString();
        
        setTimeout(() => {
            lastSaveTime = Date.now();
            saveTeams(true);
        }, 100);
    });

    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'axie-delete';
    deleteBtn.innerText = '√ó';
    deleteBtn.onclick = (e) => {
        e.stopPropagation();
        axieDiv.style.transition = 'all 0.3s ease';
        axieDiv.style.transform = 'scale(0) rotate(180deg)';
        axieDiv.style.opacity = '0';
        setTimeout(() => {
            axieDiv.remove();
            setTimeout(() => {
                saveTeams();
            }, 100);
        }, 300);
    };

    imageWrapper.appendChild(img);
    axieDiv.appendChild(imageWrapper);
    axieDiv.appendChild(idLabel);
    axieDiv.appendChild(deleteBtn);
    grid.appendChild(axieDiv);
    
    return true;
}

function addAxie(teamId) {
    const input = document.getElementById(`axieInput-${teamId}`);
    const idsRaw = input.value.trim();
    if(!idsRaw) return;
    
    const ids = idsRaw.split(/[\s,]+/).filter(id => id.trim());
    if(ids.length === 0) return;
    
    const teamDiv = document.querySelector(`.team-card[data-team-id="${teamId}"]`);
    const grid = teamDiv.querySelector('.axie-grid');
    
    const validIds = ids.filter(id => id.trim());
    let addedCount = 0;
    let validCount = 0;
    
    validIds.forEach((id, index) => {
        const trimmedId = id.trim();
        setTimeout(() => {
            const result = addAxieToGrid(trimmedId, grid, '', false);
            if(result !== false) {
                validCount++;
            }
            addedCount++;
            
            if(addedCount === validIds.length) {
                setTimeout(() => {
                    if(validCount > 0) {
                        saveTeams();
                    }
                }, 300);
            }
        }, index * 30);
    });
    
    input.value = '';
}

function copyAllAxieIds(teamId) {
    const teamDiv = document.querySelector(`.team-card[data-team-id="${teamId}"]`);
    if(!teamDiv) return;
    
    const grid = teamDiv.querySelector('.axie-grid');
    if(!grid) return;
    
    const axies = Array.from(grid.querySelectorAll('.axie-container'));
    if(axies.length === 0) {
        alert('Este equipo no tiene axies para copiar');
        return;
    }
    
    const ids = axies.map(axie => axie.dataset.axieId).filter(id => id);
    const idsString = ids.join(', ');
    
    const updateButton = (button) => {
        const originalText = button.innerHTML;
        button.innerHTML = '‚úì Copiado!';
        button.style.background = 'rgba(46, 213, 115, 0.2)';
        button.style.borderColor = 'rgba(46, 213, 115, 0.5)';
        button.style.color = '#2ed573';
        
        setTimeout(() => {
            button.innerHTML = originalText;
            button.style.background = '';
            button.style.borderColor = '';
            button.style.color = '';
        }, 2000);
    };
    
    if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(idsString).then(() => {
            const button = document.querySelector(`button.copy-ids-btn[onclick*="${teamId}"]`);
            if(button) updateButton(button);
        }).catch(() => {
            const textarea = document.createElement('textarea');
            textarea.value = idsString;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            const button = document.querySelector(`button.copy-ids-btn[onclick*="${teamId}"]`);
            if(button) updateButton(button);
        });
    } else {
        const textarea = document.createElement('textarea');
        textarea.value = idsString;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        const button = document.querySelector(`button.copy-ids-btn[onclick*="${teamId}"]`);
        if(button) updateButton(button);
    }
}

function editTeamName(teamId) {
    const teamDiv = document.querySelector(`.team-card[data-team-id="${teamId}"]`);
    if(!teamDiv) return;
    
    const nameSpan = teamDiv.querySelector('.team-name');
    if(!nameSpan) return;
    
    const currentName = nameSpan.textContent;
    const input = document.createElement('input');
    input.type = 'text';
    input.className = 'team-name-input';
    input.value = currentName;
    
    nameSpan.style.display = 'none';
    nameSpan.parentElement.insertBefore(input, nameSpan);
    input.focus();
    input.select();
    
    const saveName = () => {
        const newName = input.value.trim();
        if(newName && newName !== currentName) {
            nameSpan.textContent = newName;
            saveTeams();
        }
        input.remove();
        nameSpan.style.display = '';
    };
    
    input.addEventListener('blur', saveName);
    input.addEventListener('keypress', (e) => {
        if(e.key === 'Enter') {
            e.preventDefault();
            saveName();
        } else if(e.key === 'Escape') {
            input.remove();
            nameSpan.style.display = '';
        }
    });
}

function clearAllAxies(teamId) {
    if (!confirm('¬øEst√°s seguro de que quieres eliminar TODOS los axies de este equipo?')) {
        return;
    }
    
    const teamDiv = document.querySelector(`.team-card[data-team-id="${teamId}"]`);
    if(!teamDiv) return;
    
    const grid = teamDiv.querySelector('.axie-grid');
    if(!grid) return;
    
    const axies = grid.querySelectorAll('.axie-container');
    if(axies.length === 0) {
        alert('Este equipo no tiene axies para eliminar');
        return;
    }
    
    axies.forEach(axie => {
        axie.style.transition = 'all 0.3s ease';
        axie.style.transform = 'scale(0) rotate(180deg)';
        axie.style.opacity = '0';
    });
    
    setTimeout(() => {
        axies.forEach(axie => axie.remove());
        setTimeout(() => {
            saveTeams();
        }, 100);
    }, 300);
}

function deleteTeam(teamId) {
    if (!confirm('¬øEst√°s seguro de que quieres eliminar este equipo?')) {
        return;
    }
    const container = document.getElementById('teamsContainer');
    const teamDiv = container.querySelector(`.team-card[data-team-id="${teamId}"]`);
    if(teamDiv) {
        teamDiv.style.transition = 'all 0.4s ease';
        teamDiv.style.transform = 'translateX(-100%)';
        teamDiv.style.opacity = '0';
        setTimeout(() => {
            teamDiv.remove();
            setTimeout(() => {
                saveTeams();
            }, 100);
            if (container.children.length === 0) {
                container.innerHTML = '<div class="empty-state">No hay equipos guardados. ¬°Crea tu primer equipo arriba!</div>';
            }
        }, 400);
    }
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => {
            checkLogin();
        }, 200);
    });
} else {
    setTimeout(() => {
        checkLogin();
    }, 200);
}
</script>

</body>
</html>
